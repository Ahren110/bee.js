!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Bee=t()}}(function(){return function t(e,n,r){function i(a,o){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";function r(t){t&&(this.prefix=t)}function i(t,e){E(t)&&(e=t,t=e.$tpl),e=e||{};var n,r={$data:this.$data||{},$el:this.$el||null,$target:this.$target||null,$tpl:this.$tpl||"",$children:null,$filters:this.$filters||{},$parent:null,_watchers:this._watchers||{},_assignments:null};_(this,r,e),_(this,this.$data),t=t||this.$tpl,n=f(t,this.$target),this.$el?this.$el.appendChild(n.el):this.$el=n.el,this.$tpl=n.tpl,this.$children=n.children,o.call(this,this.$el),this.$render(this.$data||{})}function s(t,e){var n;1===arguments.length?e=t:n=[t],n||(n=$(e)?a.call(this,e):["$data"]);for(var r,i=0;r=n[i];i++)this.$update(r,!0)}function a(t,e){var n,r=[];e=e||"";for(var i in t)t.hasOwnProperty(i)&&(n=e+"."+i,e||(n=n.slice(1)),$(t[i])&&!p.isArray(t[i])&&(r=r.concat(a.call(this,t[i],n))),n in this._watchers&&r.push(n));return r}function o(t){if(t.nodeType===C.FRAGMENT&&(t=t.childNodes),"length"in t&&w(t.nodeType))for(var e=0;e<t.length;e++)o.call(this,t[e]);else{switch(t.nodeType){case C.ELEMENT:break;case C.COMMENT:return;case C.TEXT:return void u.call(this,t)}if(!c.call(this,t).terminal){if(t.content&&t.content.nodeType)return o.call(this,t.content),void(t.parentNode&&t.parentNode.replaceChild(t.content,t));for(var n,r=t.firstChild;r;)n=r.nextSibling,o.call(this,r),r=n}}}function c(t){for(var e,n,r,i=this.constructor,s=i.prefix,a=i.directive.getDir(t,i.directives,i.components,s),o={},c=0,u=a.length;u>c&&(e=a[c],e.__dirs=a,!(n>e.priority));c++)t.removeAttribute(e.nodeName),l.call(this,e),e.terminal&&(r=!0,n=e.priority);return o.dirs=a,r&&(o.terminal=!0),o}function u(t){if(x.hasToken(t.nodeValue)){var e,n,r=x.parseToken(t.nodeValue),i=r.textMap,s=t.parentNode,a=this.constructor.directives;i.length>1?(i.forEach(function(e){var n=d.createTextNode(e);s.insertBefore(n,t),u.call(this,n)}.bind(this)),s.removeChild(t)):(e=r[0],n=O(e.escape?a.text:a.html),l.call(this,_(n,e,{el:t})))}}function l(t){if(t.replace){var e=t.el;k(t.replace)?t.node=t.replace():t.replace&&(t.node=d.createTextNode("")),t.el=t.el.parentNode,t.el.replaceChild(t.node,e)}t.link(this),t.dirs?t.dirs.forEach(function(e){h.call(this,_(O(t),e))}.bind(this)):h.call(this,t)}function h(t){return t.path&&t.watch?new b(this,t):void 0}function f(t,e){var n,r,i=null;if($(e)&&e.children){i=[];for(var s=0,a=e.children.length;a>s;s++)i.push(e.children[s].cloneNode(!0))}return $(t)?(n=t,t=n.outerHTML):(r=d.createElement("div"),r.innerHTML=t,n=r.firstElementChild||r.children[0]),e&&e.parentNode&&e.parentNode.replaceChild(n,e),{el:n,tpl:t,children:i}}var d=t("./env.js").document,p=t("./utils.js"),v=t("./event.js"),m=t("./class.js"),y=t("./directive.js"),g=t("./component.js"),b=t("./watcher.js"),j=t("./directives"),x=t("./token.js"),$=p.isObject,w=p.isUndefined,k=p.isFunction,E=p.isPlainObject,N=p.parseKeyPath,A=p.deepSet,T=p.deepGet,_=p.extend,O=p.create,C={ELEMENT:1,ATTR:2,TEXT:3,COMMENT:8,FRAGMENT:11};_(i,m,y,g,{setPrefix:r,prefix:"",doc:d,directives:{},components:{}}),i.setPrefix("a-");for(var P in j)i.directive(P,j[P]);_(i.prototype,v,{$render:function(t){return t=t||this.$data,this.$replace(t),this},$get:function(t){return T(t,this)},$set:function(t,e){var n,r,i=!1;return w(t)?this:(1===arguments.length?(_(!0,this.$data,t),_(!0,this,t)):(i=!0,r=N(t),n=A(t,e,{}),"$data"!==r[0]&&_(!0,this.$data,n),_(!0,this,n)),i?s.call(this,t,e):s.call(this,t),this)},$replace:function(t,e){var n,r=!1;return w(t)?this:(1===arguments.length?this.$data=t:(r=!0,n=N(t),"data"!==n[0]&&(A(t,null,this.$data),A(t,e,this.$data)),A(t,null,this),A(t,e,this)),r?s.call(this,t,e):s.call(this,t),this)},$update:function(t,e){e=e!==!1;for(var n,r=N(t);t=r.join(".");){if(n=this._watchers[t])for(var i=0,s=n.length;s>i;i++)n[i].update();if(!e)break;r.pop(),r.length||"$data"===t||r.push("$data")}return this},$watch:function(t,e){e&&h.call(this,{path:t,update:e,watch:!0})},$unwatch:function(t,e){for(var n=this._watchers[t]||[],r=n.length-1;r>=0;r--)n[r].dir.update===e&&n.splice(r,1)}}),i.version="0.1.0",e.exports=i},{"./class.js":2,"./component.js":3,"./directive.js":4,"./directives":7,"./env.js":12,"./event.js":15,"./token.js":17,"./utils.js":18,"./watcher.js":19}],2:[function(t,e,n){var r=t("./utils.js").extend,i={extend:function(t,e){t=t||{};var n=t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},i=this,s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,r(n.prototype,t),r(n,i,e,{__super__:i.prototype}),n}};e.exports=i},{"./utils.js":18}],3:[function(t,e,n){function r(t,e){var n=this.components=this.components||{};return this.doc.createElement(t),n[t]=e}n.tag=n.component=r},{}],4:[function(t,e,n){"use strict";function r(t,e){var n=this.directives=this.directives||{};return n[t]=new i(t,e)}function i(t,e){this.type=t,a.extend(this,e)}function s(t,e,n,r){r=r||"",e=e||{};var i,s,u,l,h=[],f={},d=t.parentNode,p=t.nodeName.toLowerCase();p in n&&t.setAttribute(r+"component",p);for(var v=t.attributes.length-1;v>=0;v--)i=t.attributes[v],s=i.nodeName,u=s.slice(r.length),0===s.indexOf(r)&&u in e?(l=a.create(e[u]),l.dirName=u):o.hasToken(i.value)?(l=a.create(e.attr),l.dirs=o.parseToken(i.value),l.dirName=0===s.indexOf(r)?u:s):l=!1,l&&(l.anchor&&!f.start&&(f.start=c.createComment(l.dirName+" start"),d.insertBefore(f.start,t),f.end=c.createComment(l.dirName+" end"),t.nextSibling?d.insertBefore(f.end,t.nextSibling):d.appendChild(f.end)),h.push(a.extend(l,{el:t,node:i,nodeName:s,path:i.value,anchors:l.anchor?f:null})));return h.sort(function(t,e){return e.priority-t.priority}),h}var a=t("./utils.js"),o=t("./token.js"),c=t("./env.js").document;i.prototype={priority:0,link:a.noop,update:a.noop,tearDown:a.noop,terminal:!1,replace:!1,watch:!0,anchor:!1,anchors:null,getNodes:function(){var t=[],e=this.anchors.start.nextSibling;if(this.anchor&&e){for(;e!==this.anchors.end;)t.push(e),e=e.nextSibling;return t}return null}},r.getDir=s,n.directive=r},{"./env.js":12,"./token.js":17,"./utils.js":18}],5:[function(t,e,n){"use strict";function r(t,e,n){try{(e in t||"class"===e)&&("style"===e&&t.style.setAttribute?t.style.setAttribute("cssText",n):"class"===e?t.className=n:t[e]="boolean"==typeof t[e]?!0:n)}catch(r){}try{t.setAttribute(e,n)}catch(r){console.warn(r)}}function i(t,e){t.removeAttribute(e),delete t[e]}var s=(t("../utils.js"),/\?$/);e.exports={link:function(){this.dirName===this.type?this.attrs={}:s.test(this.dirName)&&(this.dirName=this.dirName.replace(s,""),this.conditionalAttr=!0)},update:function(t){var e=this.el,n={};if(this.dirName===this.type){for(var s in t)r(e,s,t[s]),delete this.attrs[s],n[s]=!0;for(var s in this.attrs)i(e,s);this.attrs=n}else this.conditionalAttr?t?r(e,this.dirName,t):i(e,this.dirName):(this.textMap[this.position]=t&&t+"",r(e,this.dirName,this.textMap.join("")))}}},{"../utils.js":18}],6:[function(t,e,n){var r=t("../utils.js");e.exports={priority:-10,watch:!1,terminal:!0,link:function(t){var e,n,i,s=this.el,a=this.path,o=t.constructor.components,c=[],u={};if(a in o){c=this.__dirs,c=c.filter(function(t){return"attr"==t.type||"with"==t.type}),i=s.attributes;for(var l=i.length-1;l>=0;l--)u[i[0].nodeName]=i[0].value;return c.forEach(function(e){var r=[];r=e.dirs?e.dirs.map(function(t){return{parentPath:t.path,currentPath:e.nodeName}}):e.locals.map(function(t){return{parentPath:t,currentPath:t}}),r.forEach(function(e){t.$watch(e.parentPath,function(t){n?n.$set(e.currentPath,t):"$data"===e.currentPath?u=t:u[e.currentPath]=t})})}),e=o[a],n=new e({$target:s,$data:r.extend({},e.prototype.$data,u)}),t.$el===s&&(t.$el=n.$el),!0}console.warn("Component: "+a+" not defined! Ignore")}}},{"../utils.js":18}],7:[function(t,e,n){"use strict";var r=t("../env.js").document,i=t("../utils.js"),s=(t("../token.js"),{});s.text={terminal:!0,replace:!0,update:function(t){this.node.nodeValue=i.isUndefined(t)?"":t}},s.html={terminal:!0,replace:!0,link:function(){this.nodes=[]},update:function(t){var e=r.createElement("div");e.innerHTML=i.isUndefined(t)?"":t;for(var n;n=this.nodes.pop();)n.parentNode&&n.parentNode.removeChild(n);for(var s=e.childNodes;n=s[0];)this.nodes.push(n),this.el.insertBefore(n,this.node)}},s["if"]={anchor:!0,link:function(){this.el.content?(this.frag=this.el.content,this.el.parentNode.removeChild(this.el)):(this.frag=r.createDocumentFragment(),this.hide())},update:function(t){t?this.state||this.show():this.state&&this.hide(),this.state=t},show:function(){var t=this.anchors.end;t.parentNode&&t.parentNode.insertBefore(this.frag,t)},hide:function(){var t=this.getNodes();if(t)for(var e=0,n=t.length;n>e;e++)this.frag.appendChild(t[e])}},s.template={priority:1e4,link:function(){for(var t=this.el.childNodes,e=r.createDocumentFragment();t[0];)e.appendChild(t[0]);this.el.content=e}},s.src={update:function(t){this.el.src=t}},s["with"]={},s.repeat=t("./repeat.js"),s.attr=t("./attr.js"),s.model=t("./model.js"),s.style=t("./style.js"),s.on=t("./on.js"),s.component=t("./component.js"),e.exports=s},{"../env.js":12,"../token.js":17,"../utils.js":18,"./attr.js":5,"./component.js":6,"./model.js":8,"./on.js":9,"./repeat.js":10,"./style.js":11}],8:[function(t,e,n){"use strict";var r=t("../utils.js"),i=t("../token.js").hasToken,s=t("../event-bind.js");e.exports={teminal:!0,priority:1,link:function(t){var e=this.path;if(!e)return!1;var n,a=this.el,o="change",c=n="value",u=t,l=r.isUndefined(u.$get(e)),h=/\r\n/g,f=function(t){var e=(t||"")+"",t=a[n];t&&t.replace&&(t=t.replace(h,"\n")),e!==t&&(a[n]=e)},d=function(t){var n=a[c];n.replace&&(n=n.replace(h,"\n")),u.$set(e,n,{isBubble:t!==!0})},p=function(t){t&&t.propertyName&&t.propertyName!==n||d.apply(this,arguments)},v=r.ie;switch(a.tagName){default:c=n="innerHTML";case"INPUT":case"TEXTAREA":switch(a.type){case"checkbox":c=n="checked",v&&(o+=" click");break;case"radio":n="checked",v&&(o+=" click"),f=function(t){a.checked=a.value===t+""},l=a.checked;break;default:u.$lazy||("oninput"in a&&(o+=" input"),v&&(o+=" keyup propertychange cut"))}break;case"SELECT":a.multiple&&(d=function(t){for(var n=[],r=0,i=a.options.length;i>r;r++)a.options[r].selected&&n.push(a.options[r].value);u.$set(e,n,{isBubble:t!==!0})},f=function(t){if(t&&t.length)for(var e=0,n=a.options.length;n>e;e++)a.options[e].selected=-1!==t.indexOf(a.options[e].value)}),l=l&&!i(a[c])}this.update=f,o.split(/\s+/g).forEach(function(t){s.removeEvent(a,t,p),s.addEvent(a,t,p)}),a[c]&&l&&d(!0)}}},{"../event-bind.js":14,"../token.js":17,"../utils.js":18}],9:[function(t,e,n){"use strict";var r=t("../event-bind.js");e.exports={link:function(t){this.vm=t},update:function(t){for(var e in t)r.addEvent(this.el,e,t[e].bind(this.vm))}}},{"../event-bind.js":14}],10:[function(t,e,n){"use strict";function r(t,e){return t.filter(function(t){return e.indexOf(t)<0})}var i=(t("../env.js").document,t("../utils.js"));e.exports={priority:1e3,anchor:!0,terminal:!0,link:function(t){this.vm=t,this.cstr=t.constructor,this.curArr=[],this.list=[],this.el.parentNode.removeChild(this.el)},update:function(t){var e=this.curArr,n=this.anchors.end.parentNode;i.isArray(t)&&(r(e,t).forEach(function(t){var r=e.indexOf(t);e.splice(r,1),n.removeChild(this.list[r].el),this.list.splice(r,1)}.bind(this)),t.forEach(function(r,i){var s,a,o=t.indexOf(r,i),c=e.indexOf(r,i);0>o&&(o=t.lastIndexOf(r,i)),0>c&&(c=e.lastIndexOf(r,i)),0>c?(a=this.el.cloneNode(!0),s=new this.cstr(a,{$data:r,$parent:this.vm,_assignments:this.assignments}),n.insertBefore(s.$el,this.list[o]&&this.list[o].el||this.anchors.end),e.splice(o,0,r),this.list.splice(o,0,{el:a,vm:s})):o!==c&&(n.insertBefore(this.list[c].el,this.list[o].el||this.anchor.end),n.insertBefore(this.list[o].el,this.list[c+1].el||this.anchor.end),this.list[c]=[this.list[o],this.list[o]=this.list[c]][0],e[c]=[e[o],e[o]=e[c]][0])}.bind(this)))}}},{"../env.js":12,"../utils.js":18}],11:[function(t,e,n){"use strict";var r=/([A-Z])/g,i=["width","height","margin","margin-top","margin-right","margin-left","margin-bottom","padding","padding-top","padding-right","padding-bottom","padding-left"];e.exports={link:function(){},update:function(t){var e,n,s=this.el,a="";for(var o in t)n=t[o],e=o.replace(r,function(t){return"-"+t.toLowerCase()}),!isNaN(n)&&i.indexOf(e)>=0&&(n+="px"),a+=e+": "+n+"; ";s.style.setAttribute?s.style.setAttribute("cssText",a):s.setAttribute("style",a)}}},{}],12:[function(t,e,n){!function(e){"use strict";n.root=e,n.document=e.document||t("jsdom").jsdom()}(function(){return this}())},{jsdom:void 0}],13:[function(t,e,n){"use strict";function r(t,e){return u[t][e]||function(){}}function i(t){a=t?{locals:t||{},filters:t.$filters||{}}:{filters:{},locals:{}},o={filters:{},locals:{},paths:{},assignments:{}},c=""}function s(t,e){return"undefined"!=typeof e[t]?e[t]:e._assignments&&e._assignments[0]===t?e:e.$parent?s(t,e.$parent):void 0}var a,o,c,u={unary:{"+":function(t){return+t},"-":function(t){return-t},"!":function(t){return!t},"[":function(t){return t},"{":function(t){for(var e={},n=0,r=t.length;r>n;n++)e[t[n][0]]=t[n][1];return e},"typeof":function(t){return typeof t},"new":function(t){return new t}},binary:{"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"<":function(t,e){return e>t},">":function(t,e){return t>e},"<=":function(t,e){return e>=t},">=":function(t,e){return t>=e},"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"&&":function(t,e){return t&&e},"||":function(t,e){return t||e},".":function(t,e){return e&&(c=c+"."+e),t[e]},"[":function(t,e){return"undefined"!=typeof e&&(c=c+"."+e),t[e]},"(":function(t,e){return t.apply(a.locals,e)},"|":function(t,e){return e.call(a.locals,t)},"new":function(t,e){return t===Date?new Function("return new Date("+e.join(", ")+")")():new(Function.prototype.bind.apply(t,e))},"in":function(t,e){return this.assignment?e:t in e}},ternary:{"?":function(t,e,n){return t?e:n},"(":function(t,e,n){return t[e].apply(t,n)},"|":function(t,e,n){return e.apply(a.locals,[t].concat(n))}}},l=["first","second","third"],h=function(t){for(var e,n,i=t.arity,u=t.value,f=[],d=0;3>d;d++)if(e=t[l[d]])if(Array.isArray(e)){f[d]=[];for(var p=0,v=e.length;v>p;p++)f[d].push("undefined"==typeof e[p].key?h(e[p]):[e[p].key,h(e[p])])}else f[d]=h(e);switch("literal"!==i&&(c&&"."!==u&&"["!==u&&(o.paths[c]=!0),"name"===i&&(c=u)),i){case"unary":case"binary":case"ternary":try{n=r(i,u).apply(t,f)}catch(m){}break;case"literal":n=u;break;case"assignment":o.assignments[u]=!0;break;case"name":o.locals[u]=!0,n=s(u,a.locals);break;case"filter":o.filters[u]=!0,n=a.filters[u];break;case"this":n=a.locals}return n};n.eval=function(t,e){return i(e||{}),h(t)},n.summary=function(t){i(),h(t),c&&(o.paths[c]=!0);for(var e in o)o[e]=Object.keys(o[e]);return o}},{}],14:[function(t,e,n){"use strict";n.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},n.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)}},{}],15:[function(t,e,n){var r=t("./utils.js"),i={on:function(t,e,n){var r=n||this;return r._handlers=r._handlers||{},r._handlers[t]=r._handlers[t]||[],r._handlers[t].push({handler:e,context:n,ctx:r}),this},one:function(t,e,n){return e&&(e.one=!0),this.on(t,e,n)},off:function(t,e,n){var i=n||this,s=i._handlers;if(t&&s[t])if(r.isFunction(e))for(var a=s[t].length-1;a>=0;a--)s[t][a].handler===e&&s[t].splice(a,1);else s[t]=[];return this},trigger:function(t,e){var n=[].slice.call(arguments,1),r=this._handlers&&this._handlers[t];if(r)for(var i,s=0;i=r[s];s++)i.handler.apply(this,n),i.handler.one&&(r.splice(s,1),s--);return this}};e.exports=i},{"./utils.js":18}],16:[function(t,e,n){"use strict";var r,i=Object.create||function(t){function e(){}return e.prototype=t,new e},s=function(t,e){e=e||this;var n=t+=" But found '"+e.value+"'"+(e.from?" at "+e.from:"")+" in '"+r+"'",i=new Error(n);throw i.name=e.name="SyntaxError",e.message=t,i},a=function(t,e,n){var r,i,a,o,c,u=0,l=t.length,h=[],f=function(t,e){return{type:t,value:e,from:i,to:u}};if(t){for(r=t.charAt(u);r;)if(i=u," ">=r)u+=1,r=t.charAt(u);else if(r>="a"&&"z">=r||r>="A"&&"Z">=r||"$"===r||"_"===r){for(c=r,u+=1;r=t.charAt(u),r>="a"&&"z">=r||r>="A"&&"Z">=r||r>="0"&&"9">=r||"_"===r;)c+=r,u+=1;h.push(f("name",c))}else if(r>="0"&&"9">=r){for(c=r,u+=1;r=t.charAt(u),!("0">r||r>"9");)u+=1,c+=r;if("."===r)for(u+=1,c+=r;r=t.charAt(u),!("0">r||r>"9");)u+=1,c+=r;if("e"===r||"E"===r){u+=1,c+=r,r=t.charAt(u),("-"===r||"+"===r)&&(u+=1,c+=r,r=t.charAt(u)),("0">r||r>"9")&&s("Bad exponent",f("number",c));do u+=1,c+=r,r=t.charAt(u);while(r>="0"&&"9">=r)}r>="a"&&"z">=r&&(c+=r,u+=1,s("Bad number",f("number",c))),a=+c,isFinite(a)?h.push(f("number",a)):s("Bad number",f("number",c))}else if("'"===r||'"'===r){for(c="",o=r,u+=1;r=t.charAt(u)," ">r&&(f("string",c),s("\n"===r||"\r"===r||""===r?"Unterminated string.":"Control character in string.",f("",c))),r!==o;){if("\\"===r)switch(u+=1,u>=l&&s("Unterminated string",f("string",c)),r=t.charAt(u)){case"b":r="\b";break;case"f":r="\f";break;case"n":r="\n";break;case"r":r="\r";break;case"t":r="	";break;case"u":u>=l&&s("Unterminated string",f("string",c)),r=parseInt(t.substr(u+1,4),16),(!isFinite(r)||0>r)&&s("Unterminated string",f("string",c)),r=String.fromCharCode(r),u+=4}c+=r,u+=1}u+=1,h.push(f("string",c)),r=t.charAt(u)}else if(e.indexOf(r)>=0){for(c=r,u+=1;;){if(r=t.charAt(u),u>=l||n.indexOf(r)<0)break;c+=r,u+=1}h.push(f("operator",c))}else u+=1,h.push(f("operator",r)),r=t.charAt(u);return h}},o=function(t){t=t||{};var e,n,o,c,u={},l=function(){return this},h=function(t){return t.nud=l,t.led=null,t.std=null,t.lbp=0,t},f=function(t){var r,a,c,l;return t&&e.id!==t&&s("Expected '"+t+"'.",e),o>=n.length?void(e=u["(end)"]):(c=n[o],o+=1,l=c.value,r=c.type,("operator"===r||"string"!==r)&&l in u?(a=u[l],a||s("Unknown operator.",c)):"name"===r?a=h(c):"string"===r||"number"===r||"regexp"===r?(a=u["(literal)"],r="literal"):s("Unexpected token.",c),e=i(a),e.from=c.from,e.to=c.to,e.value=l,e.arity=r,e)},d=function(t){var n,r=e;for(f(),n=r.nud();t<e.lbp;)r=e,f(),n=r.led(n);return n},p={nud:function(){s("Undefined.",this)},led:function(t){s("Missing operator.",this)}},v=function(t,e){var n=u[t];return e=e||0,n?e>=n.lbp&&(n.lbp=e):(n=i(p),n.id=n.value=t,n.lbp=e,u[t]=n),n},m=function(t,e,n){var r=v(t);return r.nud=function(){return this.value=u[this.id].value,this.arity="literal",this},r.value=e,r},y=function(t,e,n){var r=v(t,e);return r.led=n||function(t){return this.first=t,this.second=d(e),this.arity="binary",this},r},g=function(t,e,n){var r=v(t,e);return r.led=n||function(t){return this.first=t,this.second=d(e-1),this.arity="binary",this},r},b=function(t,e){var n=v(t);return n.nud=e||function(){return this.first=d(70),this.arity="unary",this},n};v("(end)"),v("(name)"),v(":"),v(")"),v("]"),v("}"),v(","),m("true",!0),m("false",!1),m("null",null),m("undefined"),m("Math",Math),m("Date",Date);for(var j in t)m(j,t[j]);return v("(literal)").nud=l,y("?",20,function(t){return this.first=t,this.second=d(0),f(":"),this.third=d(0),this.arity="ternary",this}),g("&&",31),g("||",30),g("===",40),g("!==",40),g("==",40),g("!=",40),g("<",40),g("<=",40),g(">",40),g(">=",40),y("in",45,function(t){return this.first=t,this.second=d(0),this.arity="binary","repeat"===c&&(t.arity="assignment",this.assignment=!0),this}),y("+",50),y("-",50),y("*",60),y("/",60),y("%",60),y("(",70,function(t){var n=[];if("."===t.id||"["===t.id?(this.arity="ternary",this.first=t.first,this.second=t.second,this.third=n):(this.arity="binary",this.first=t,this.second=n,"unary"===t.arity&&"function"===t.id||"name"===t.arity||"literal"===t.arity||"("===t.id||"&&"===t.id||"||"===t.id||"?"===t.id||s("Expected a variable name.",t)),")"!==e.id)for(;;){if(n.push(d(0)),","!==e.id)break;f(",")}return f(")"),this}),y(".",80,function(t){return this.first=t,"name"!==e.arity&&s("Expected a property name.",e),e.arity="literal",this.second=e,this.arity="binary",f(),this}),y("[",80,function(t){return this.first=t,this.second=d(0),this.arity="binary",f("]"),this}),y("|",10,function(t){var n;if(this.first=t,e.arity="filter",this.second=d(10),this.arity="binary",":"===e.id)for(this.arity="ternary",this.third=n=[];;)if(f(":"),n.push(d(0)),":"!==e.id)break;return this}),b("!"),b("-"),b("typeof"),b("(",function(){var t=d(0);return f(")"),t}),b("[",function(){var t=[];if("]"!==e.id)for(;;){if(t.push(d(0)),","!==e.id)break;f(",")}return f("]"),this.first=t,this.arity="unary",this}),b("{",function(){var t,n,r=[];if("}"!==e.id)for(;;){if(t=e,"name"!==t.arity&&"literal"!==t.arity&&s("Bad property name: ",e),f(),f(":"),n=d(0),n.key=t.value,r.push(n),","!==e.id)break;f(",")}return f("}"),this.first=r,this.arity="unary",this}),b("new",function(){var t=[];if(this.first=d(79),"("===e.id){for(f("("),this.arity="binary",this.second=t;;){if(t.push(d(0)),","!==e.id)break;f(",")}f(")")}else this.arity="unary";return this}),function(t,e){r=t,n=a(t,"=<>!+-*&|/%^","=<>&|"),o=0,c=e,f();var i=d(0);return f("(end)"),i}};n.parse=o()},{}],17:[function(t,e,n){function r(t){return s.lastIndex=0,t&&s.test(t)}function i(t){var e,n,r=[],i=[],a=0;for(s.lastIndex=0;e=s.exec(t);)s.lastIndex-a>e[0].length&&i.push(t.slice(a,s.lastIndex-e[0].length)),n={escape:!e[2],path:(e[2]||e[1]).trim(),position:i.length,textMap:i},r.push(n),i.push(e[0]),a=s.lastIndex;return t.length>a&&i.push(t.slice(a,t.length)),r.textMap=i,r}var s=/{{({([^}\n]+)}|[^}\n]+)}}/g;n.hasToken=r,n.parseToken=i},{}],18:[function(t,e,n){"use strict";function r(t){return t.replace(o,"").split(a)}function i(){var t,e,n,r,s,a,o=arguments[0]||{},c=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[c]||{},c++),u.isFunction(arguments[l-1])&&l--,"object"==typeof o||u.isFunction(o)||(o={});l>c;c++)if(null!=(t=arguments[c]))for(e in t)if(t.hasOwnProperty(e)&&"prototype"!==e)if(n=o[e],r=t[e],h&&r&&(u.isPlainObject(r)||(s=u.isArray(r)))){if(o===r)continue;s?(s=!1,a=n&&u.isArray(n)?n:[]):a=n&&u.isPlainObject(n)?n:{},o[e]=i(h,a,r)}else u.isUndefined(r)||(o[e]=r);return o}var s=t("./env.js").document,a=/(?:\.|\[)/g,o=/\]/g,c=Object.create||function(t){function e(){}return e.prototype=t,new e},u={noop:function(){},ie:!!s.attachEvent,isObject:function(t){return"object"==typeof t&&null!==t},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:function(t){return u.ie?t&&t.constructor+""==Array+"":Array.isArray(t)},isPlainObject:function(t){return!t||"[object Object]"!=={}.toString.call(t)||t.nodeType||t===t.window?!1:!0},beforeFn:function(t,e,n){return function(){var r=e.apply(this,arguments);return n&&n.call(this,r)?r:t.apply(this,arguments)}},afterFn:function(t,e,n){return function(){var r=t.apply(this,arguments);return n&&n.call(this,r)?r:(e.apply(this,arguments),r)}},parseKeyPath:r,deepSet:function(t,e,n){if(t){var s=r(t),a=n;s.forEach(function(t,n){n===s.length-1?a[t]=e:a&&a.hasOwnProperty(t)?a=a[t]:(a[t]={},a=a[t])})}else i(n,e);return n},deepGet:function(t,e){var n,i,s=e;if(t){n=r(t);for(var a=0,o=n.length;o>a;a++){if(i=n[a],!s||!s.hasOwnProperty(i))return;s=s[i]}}return s},clone:function l(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var n in t)e[n]=l(t[n]);return e},extend:i,create:c};e.exports=u},{"./env.js":12}],19:[function(t,e,n){"use strict";function r(t){var e,n={};try{n=a(t,this.dir.type)}catch(r){r.message='SyntaxError in "'+t+'" | '+r.message,console.error(r)}e=o.summary(n),l(this.dir,e),l(this,e),this.ast=n}function i(t,e){var n,s,a,o,u,l,h=t;this.dir=e,this.vm=t,this.val=0/0,this.state=i.STATE_READY,r.call(this,e.path);for(var f=0,d=this.paths.length;d>f;f++){for(l=c.parseKeyPath(this.paths[f]),a=l[0];h;){if(s=h,u=h._assignments,u&&u.length){if(u[0]===a){1==l.length?l[0]="$data":l.shift();break}}else if(a in h)break;o=!0,h=h.$parent}n=l.join("."),s._watchers[n]=s._watchers[n]||[],s._watchers[n].push(this)}(!this.locals.length||o)&&this.update()}function s(t){try{this.dir.update(t,this.val),this.val=t}catch(e){console.error(e)}}var a=t("./parse.js").parse,o=t("./eval.js"),c=t("./utils.js"),u=t("./class.js"),l=c.extend;l(i,{STATE_READY:0,STATE_CALLED:1},u),l(i.prototype,{update:function(){var t,e=this;t=this.getValue(this.vm),t&&t.then?t.then(function(t){s.call(e,t)}):s.call(this,t),this.state=i.STATE_CALLED},getValue:function(t){var e;try{e=o.eval(this.ast,t)}catch(n){e="",console.error(n)}return(c.isUndefined(e)||null===e)&&(e=""),e}}),e.exports=i},{"./class.js":2,"./eval.js":13,"./parse.js":16,"./utils.js":18}]},{},[1])(1)});
//# sourceMappingURL=bee.js.map