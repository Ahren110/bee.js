!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Bee=t()}}(function(){return function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(t){t&&(this.prefix=t)}function r(t,e){T(t)&&(e=t,t=e.$tpl),e=e||{};var n,i={$data:this.$data||{},$el:this.$el||null,$tpl:this.$tpl||"",$children:null,$filters:this.$filters||{},$watchers:this.$watchers||{},_parent:null,_assignments:null};M(this,i,e),M(this,this.$data),t=t||this.$tpl,n=p(t,this.$el),this.$el=n.el,this.$tpl=n.tpl,this.$children=n.children,s.call(this,this.$el),this.$render(this.$data||{})}function s(t){a.call(this,t)}function a(t){if(t.nodeType===U.FRAGMENT&&(t=t.childNodes),"length"in t&&E(t.nodeType))for(var e=0;e<t.length;e++)a.call(this,t[e]);else{switch(t.nodeType){case U.ELEMENT:if(u.call(this,t))return;break;case U.COMMENT:return;case U.TEXT:return void l.call(this,t)}if(!h.call(this,t).terminal){if(t.content&&t.content.nodeType)return a.call(this,t.content),void(t.parentNode&&t.parentNode.replaceChild(t.content,t));for(var n,i=t.firstChild;i;)n=i.nextSibling,a.call(this,i),i=n}}}function o(t,e,n){var i,r;w(t)?(n=e,i=t):"string"==typeof t?(t=_(t).join("."),E(e)&&(e=this.$get(t)),i=O(t,e,{}),r=[t]):i=this.$data,E(n)&&(n=w(t)),r||(r=c.call(this,i));for(var s,a=0;s=r[a];a++)this.$update(s,!0);return this}function c(t,e){var n,i=[];e=e||"";for(var r in t)t.hasOwnProperty(r)&&(w(t[r])&&(i=i.concat(c.call(this,t[r],e+"."+r))),n=(e+"."+r).slice(1),n in this.$watchers&&i.push(n));return i}function u(t){var e,n,i=t.nodeName.toLowerCase(),r=this.constructor.components,s=[],a={};return t.__checked?void 0:i in r?(s=h.call(this,t).dirs,s=s.filter(function(t){return"attr"==t.type}),s.forEach(function(t){t.dirs.forEach(function(e){this.$watch(e.path,function(){var e=t.el.getAttribute(t.nodeName);n?n.$set(t.nodeName,e):a[t.nodeName]=e})}.bind(this))}.bind(this)),t.__checked=!0,e=r[i],n=new e({$el:t,$data:a}),!0):void 0}function h(t){for(var e,n,i,r=this.constructor,s=r.prefix,a=r.directive.getDir(t,r.directives,s),o={},c=0,u=a.length;u>c&&(e=a[c],!(n>e.priority));c++)t.removeAttribute(e.nodeName),f.call(this,e),e.terminal&&(i=!0,n=e.priority);return o.dirs=a,i&&(o.terminal=!0),o}function l(t){if(k.hasToken(t.nodeValue)){var e,n,i=k.parseToken(t.nodeValue),r=i.textMap,s=t.parentNode,a=this.constructor.directives;r.length>1?(r.forEach(function(e){var n=v.createTextNode(e);s.insertBefore(n,t),l.call(this,n)}.bind(this)),s.removeChild(t)):(e=i[0],n=L(e.escape?a.text:a.html),f.call(this,M(n,e,{el:t})))}}function f(t){if(t.replace){var e=t.el;A(t.replace)?t.node=t.replace():t.replace&&(t.node=v.createTextNode("")),t.el=t.el.parentNode,t.el.replaceChild(t.node,e)}t.link(this),t.dirs?t.dirs.forEach(function(e){d.call(this,M(L(t),e))}.bind(this)):d.call(this,t)}function d(t){return t.path?new x(this,t):void 0}function p(t,e){var n,i=null;if(w(e)&&e.children){i=[];for(var r,s=0;r=e.children[s];s++)i.push(r)}return w(t)?(e?(n=e=w(e)?e:v.createElement(e),n.innerHTML="",e.appendChild(t)):n=t,t=n.outerHTML):(n=w(e)?e:v.createElement(e||"div"),t?n.innerHTML=t:t=n.innerHTML),{el:n,tpl:t,children:i}}var v=t("./env.js").document,m=t("./utils.js"),y=t("./event.js"),g=t("./class.js"),b=t("./directive.js"),j=t("./component.js"),x=t("./watcher.js"),$=t("./directives"),k=t("./token.js"),w=m.isObject,E=m.isUndefined,A=m.isFunction,N=m.isArray,T=m.isPlainObject,_=m.parseKeyPath,O=m.deepSet,C=m.deepGet,M=m.extend,L=m.create,U={ELEMENT:1,ATTR:2,TEXT:3,COMMENT:8,FRAGMENT:11};M(r,g,b,j,{setPrefix:i,prefix:"",doc:v,directives:{},components:{}}),r.setPrefix("a-");for(var S in $)r.directive(S,$[S]);M(r.prototype,y,{$render:function(t){return t=t||this.$data,this.$replace(t),this},$get:function(t){return C(t,this.$data)},$set:function(t,e){return E(t)?this:(w(t)?(M(!0,this.$data,t),M(!0,this,t)):(M(!0,this.$data,O(t,e,{})),M(!0,this,O(t,e,{}))),o.call(this,t,e,!0),this)},$replace:function(t,e){var n,i,r;if(E(t))return this;if(w(t))this.$data=t;else{if(n=_(t),n.length>1){if(i=n.pop(),r=C(n.join("."),this.$data),E(r))r={},O(n.join("."),r,this.$data),O(n.join("."),r,this);else if(!w(r)){var s=r;r={toString:function(){return s}},O(n.join("."),r,this.$data),O(n.join("."),r,this)}}else r=this.$data,i=t;r[i]=w(e)?M(!0,N(e)?[]:{},e):e}o.call(this,t,e,!1)},$update:function(t,e){e=e!==!1;for(var n,i=_(t);t=i.join(".");){if(n=this.$watchers[t])for(var r=0,s=n.length;s>r;r++)n[r].update();if(!e)break;i.pop()}},$watch:function(t,e){e&&d.call(this,{path:t,update:e})},$unwatch:function(t,e){for(var n=this.$watchers[t]||[],i=n.length-1;i>=0;i--)n[i].dir.update===e&&n.splice(i,1)}}),r.version="0.1.0",e.exports=r},{"./class.js":2,"./component.js":3,"./directive.js":4,"./directives":6,"./env.js":11,"./event.js":14,"./token.js":16,"./utils.js":17,"./watcher.js":18}],2:[function(t,e,n){var i=t("./utils.js").extend,r={extend:function(t,e){t=t||{};var n=t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},r=this,s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,i(n.prototype,t),i(n,r,e,{__super__:r.prototype}),n}};e.exports=r},{"./utils.js":17}],3:[function(t,e,n){function i(t,e){var n=this.components=this.components||{};return this.doc.createElement(t),n[t]=e}n.tag=n.component=i},{}],4:[function(t,e,n){"use strict";function i(t,e){var n=this.directives=this.directives||{};return n[t]=new r(t,e)}function r(t,e){this.type=t,a.extend(this,e)}function s(t,e,n){n=n||"",e=e||{};for(var i,r,s,u,h=[],l={},f=t.parentNode,d=t.attributes.length-1;d>=0;d--)i=t.attributes[d],r=i.nodeName,s=r.slice(n.length),0===r.indexOf(n)&&s in e?(u=a.create(e[s]),u.dirName=s):o.hasToken(i.value)?(u=a.create(e.attr),u.dirs=o.parseToken(i.value),u.dirName=0===r.indexOf(n)?s:r):u=!1,u&&(u.anchor&&!l.start&&(l.start=c.createComment(u.dirName+" start"),f.insertBefore(l.start,t),l.end=c.createComment(u.dirName+" end"),t.nextSibling?f.insertBefore(l.end,t.nextSibling):f.appendChild(l.end)),h.push(a.extend(u,{el:t,node:i,nodeName:r,path:i.value,anchors:u.anchor?l:null})));return h.sort(function(t,e){return e.priority-t.priority}),h}var a=t("./utils.js"),o=t("./token.js"),c=t("./env.js").document;r.prototype={priority:0,link:a.noop,update:a.noop,tearDown:a.noop,terminal:!1,replace:!1,anchor:!1,anchors:null,getNodes:function(){var t=[],e=this.anchors.start.nextSibling;if(this.anchor&&e){for(;e!==this.anchors.end;)t.push(e),e=e.nextSibling;return t}return null}},i.getDir=s,n.directive=i},{"./env.js":11,"./token.js":16,"./utils.js":17}],5:[function(t,e,n){"use strict";function i(t,e,n){try{(e in t||"class"===e)&&("style"===e&&t.style.setAttribute?t.style.setAttribute("cssText",n):"class"===e?t.className=n:t[e]="boolean"==typeof t[e]?!0:n)}catch(i){}try{t.setAttribute(e,n)}catch(i){console.warn(i)}}function r(t,e){t.removeAttribute(e),delete t[e]}var s=(t("../utils.js"),/\?$/);e.exports={link:function(){this.dirName===this.type?this.attrs={}:s.test(this.dirName)&&(this.dirName=this.dirName.replace(s,""),this.conditionalAttr=!0)},update:function(t){var e=this.el,n={};if(this.dirName===this.type){for(var s in t)i(e,s,t[s]),delete this.attrs[s],n[s]=!0;for(var s in this.attrs)r(e,s);this.attrs=n}else this.conditionalAttr?t?i(e,this.dirName,t):r(e,this.dirName):(this.textMap[this.position]=t&&t+"",i(e,this.dirName,this.textMap.join("")))}}},{"../utils.js":17}],6:[function(t,e,n){"use strict";var i=t("../env.js").document,r=t("../utils.js"),s={};s.text={terminal:!0,replace:!0,update:function(t){this.node.nodeValue=r.isUndefined(t)?"":t}},s.html={terminal:!0,replace:!0,link:function(){this.nodes=[]},update:function(t){var e=i.createElement("div");e.innerHTML=r.isUndefined(t)?"":t;for(var n;n=this.nodes.pop();)n.parentNode&&n.parentNode.removeChild(n);for(var s=e.childNodes;n=s[0];)this.nodes.push(n),this.el.insertBefore(n,this.node)}},s["if"]={anchor:!0,link:function(){this.el.content?(this.frag=this.el.content,this.el.parentNode.removeChild(this.el)):(this.frag=i.createDocumentFragment(),this.hide())},update:function(t){t?this.state||this.show():this.state&&this.hide(),this.state=t},show:function(){var t=this.anchors.end;t.parentNode&&t.parentNode.insertBefore(this.frag,t)},hide:function(){var t=this.getNodes();if(t)for(var e=0,n=t.length;n>e;e++)this.frag.appendChild(t[e])}},s.template={priority:1e4,link:function(){for(var t=this.el.childNodes,e=i.createDocumentFragment();t[0];)e.appendChild(t[0]);this.el.content=e}},s.repeat=t("./repeat.js"),s.attr=t("./attr.js"),s.model=t("./model.js"),s.style=t("./style.js"),s.on=t("./on.js"),e.exports=s},{"../env.js":11,"../utils.js":17,"./attr.js":5,"./model.js":7,"./on.js":8,"./repeat.js":9,"./style.js":10}],7:[function(t,e,n){"use strict";var i=t("../utils.js"),r=t("../token.js").hasToken,s=t("../event-bind.js");e.exports={teminal:!0,priority:1,link:function(t){var e=this.path;if(!e)return!1;var n,a=this.el,o="change",c=n="value",u=t,h=i.isUndefined(u.$get(e)),l=/\r\n/g,f=function(t){var e=(t||"")+"",t=a[n];t&&t.replace&&(t=t.replace(l,"\n")),e!==t&&(a[n]=e)},d=function(t){var n=a[c];n.replace&&(n=n.replace(l,"\n")),u.$set(e,n,{isBubble:t!==!0})},p=function(t){t&&t.propertyName&&t.propertyName!==n||d.apply(this,arguments)},v=i.ie;switch(a.tagName){default:c=n="innerHTML";case"INPUT":case"TEXTAREA":switch(a.type){case"checkbox":c=n="checked",v&&(o+=" click");break;case"radio":n="checked",v&&(o+=" click"),f=function(t){a.checked=a.value===t+""},h=a.checked;break;default:u.$lazy||("oninput"in a&&(o+=" input"),v&&(o+=" keyup propertychange cut"))}break;case"SELECT":a.multiple&&(d=function(t){for(var n=[],i=0,r=a.options.length;r>i;i++)a.options[i].selected&&n.push(a.options[i].value);u.$set(e,n,{isBubble:t!==!0})},f=function(t){if(t&&t.length)for(var e=0,n=a.options.length;n>e;e++)a.options[e].selected=-1!==t.indexOf(a.options[e].value)}),h=h&&!r(a[c])}this.update=f,o.split(/\s+/g).forEach(function(t){s.removeEvent(a,t,p),s.addEvent(a,t,p)}),a[c]&&h&&d(!0)}}},{"../event-bind.js":13,"../token.js":16,"../utils.js":17}],8:[function(t,e,n){"use strict";var i=t("../event-bind.js");e.exports={link:function(t){this.vm=t},update:function(t){for(var e in t)i.addEvent(this.el,e,t[e].bind(this.vm))}}},{"../event-bind.js":13}],9:[function(t,e,n){"use strict";function i(t,e){return t.filter(function(t){return e.indexOf(t)<0})}var r=(t("../env.js").document,t("../utils.js"));e.exports={priority:1e3,anchor:!0,terminal:!0,link:function(t){this.vm=t,this.cstr=t.constructor,this.vms=[],this.curArr=[],this.els=[],this.el.parentNode.removeChild(this.el)},update:function(t){var e=this.curArr,n=this.anchors.end.parentNode;r.isArray(t)&&(i(e,t).forEach(function(t){var i=e.indexOf(t);e.splice(i,1),this.vms.splice(i,1),n.removeChild(this.els[i]),this.els.splice(i,1)}.bind(this)),t.forEach(function(i,r){var s,a,o=t.indexOf(i,r),c=e.indexOf(i,r),u={};if(0>o&&(o=t.lastIndexOf(i,r)),0>c&&(c=e.lastIndexOf(i,r)),0>c){for(var h=0;h<this.assignments.length;h++)u[this.assignments[0]]=i;a=this.el.cloneNode(!0),s=this.vms[o]=new this.cstr(a,{$data:u,_parent:this.vm}),n.insertBefore(s.$el,this.els[o]||this.anchors.end),this.els.splice(o,0,a),e.splice(o,0,i)}else o!==c&&(n.insertBefore(this.els[c],this.els[o]||this.anchor.end),n.insertBefore(this.els[o],this.els[c+1]||this.anchor.end),this.vms[c]=[this.vms[o],this.vms[o]=this.vms[c]][0],this.els[c]=[this.els[o],this.els[o]=this.els[c]][0],e[c]=[e[o],e[o]=e[c]][0])}.bind(this)))}}},{"../env.js":11,"../utils.js":17}],10:[function(t,e,n){"use strict";var i=/([A-Z])/g,r=["width","height","margin","margin-top","margin-right","margin-left","margin-bottom","padding","padding-top","padding-right","padding-bottom","padding-left"];e.exports={link:function(){},update:function(t){var e,n,s=this.el,a="";for(var o in t)n=t[o],e=o.replace(i,function(t){return"-"+t.toLowerCase()}),!isNaN(n)&&r.indexOf(e)>=0&&(n+="px"),a+=e+": "+n+"; ";s.style.setAttribute?s.style.setAttribute("cssText",a):s.setAttribute("style",a)}}},{}],11:[function(t,e,n){!function(e){"use strict";n.root=e,n.document=e.document||t("jsdom").jsdom()}(function(){return this}())},{jsdom:void 0}],12:[function(t,e,n){"use strict";function i(t,e){return u[t][e]||function(){}}function r(t){a=t?{locals:t.locals||{},filters:t.filters||{}}:{filters:{},locals:{}},o={filters:{},locals:{},paths:{},assignments:{}},c=""}function s(t,e){return"undefined"!=typeof e[t]?e[t]:e._parent?s(t,e._parent):void 0}var a,o,c,u={unary:{"+":function(t){return+t},"-":function(t){return-t},"!":function(t){return!t},"[":function(t){return t},"{":function(t){for(var e={},n=0,i=t.length;i>n;n++)e[t[n][0]]=t[n][1];return e},"typeof":function(t){return typeof t},"new":function(t){return new t}},binary:{"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"<":function(t,e){return e>t},">":function(t,e){return t>e},"<=":function(t,e){return e>=t},">=":function(t,e){return t>=e},"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"&&":function(t,e){return t&&e},"||":function(t,e){return t||e},".":function(t,e){return e&&(c=c+"."+e),t[e]},"[":function(t,e){return"undefined"!=typeof e&&(c=c+"."+e),t[e]},"(":function(t,e){return t.apply(a.locals,e)},"|":function(t,e){return e.call(null,t)},"new":function(t,e){return t===Date?new Function("return new Date("+e.join(", ")+")")():new(Function.prototype.bind.apply(t,e))},"in":function(t,e){return this.assignment?e:t in e}},ternary:{"?":function(t,e,n){return t?e:n},"(":function(t,e,n){return t[e].apply(t,n)},"|":function(t,e,n){return e.apply(null,[t].concat(n))}}},h=["first","second","third"],l=function(t){for(var e,n,r=t.arity,u=t.value,f=[],d=0;3>d;d++)if(e=t[h[d]])if(Array.isArray(e)){f[d]=[];for(var p=0,v=e.length;v>p;p++)f[d].push("undefined"==typeof e[p].key?l(e[p]):[e[p].key,l(e[p])])}else f[d]=l(e);switch("literal"!==r&&(c&&"."!==u&&"["!==u&&(o.paths[c]=!0),"name"===r&&(c=u)),r){case"unary":case"binary":case"ternary":try{n=i(r,u).apply(t,f)}catch(m){}break;case"literal":n=u;break;case"assignment":o.assignments[u]=!0;break;case"name":o.locals[u]=!0,n=s(u,a.locals);break;case"filter":o.filters[u]=!0,n=a.filters[u];break;case"this":n=a.locals}return n};n.eval=function(t,e){return r(e||{}),l(t)},n.summary=function(t){r(),l(t),c&&(o.paths[c]=!0);for(var e in o)o[e]=Object.keys(o[e]);return o}},{}],13:[function(t,e,n){"use strict";n.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},n.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)}},{}],14:[function(t,e,n){var i=t("./utils.js"),r={on:function(t,e,n){var i=n||this;return i._handlers=i._handlers||{},i._handlers[t]=i._handlers[t]||[],i._handlers[t].push({handler:e,context:n,ctx:i}),this},one:function(t,e,n){return e&&(e.one=!0),this.on(t,e,n)},off:function(t,e,n){var r=n||this,s=r._handlers;if(t&&s[t])if(i.isFunction(e))for(var a=s[t].length-1;a>=0;a--)s[t][a].handler===e&&s[t].splice(a,1);else s[t]=[];return this},trigger:function(t,e){var n=[].slice.call(arguments,1),i=this._handlers&&this._handlers[t];if(i)for(var r,s=0;r=i[s];s++)r.handler.apply(this,n),r.handler.one&&(i.splice(s,1),s--);return this}};e.exports=r},{"./utils.js":17}],15:[function(t,e,n){"use strict";var i,r=Object.create||function(t){function e(){}return e.prototype=t,new e},s=function(t,e){e=e||this;var n=t+=" But found '"+e.value+"'"+(e.from?" at "+e.from:"")+" in '"+i+"'",r=new Error(n);throw r.name=e.name="SyntaxError",e.message=t,r},a=function(t,e,n){var i,r,a,o,c,u,h=0,l=t.length,f=[],d=function(t,e){return{type:t,value:e,from:r,to:h}};if(t){for(i=t.charAt(h);i;)if(r=h," ">=i)h+=1,i=t.charAt(h);else if(i>="a"&&"z">=i||i>="A"&&"Z">=i||"$"===i||"_"===i){for(c=i,h+=1;i=t.charAt(h),i>="a"&&"z">=i||i>="A"&&"Z">=i||i>="0"&&"9">=i||"_"===i;)c+=i,h+=1;f.push(d("name",c))}else if(i>="0"&&"9">=i){for(c=i,h+=1;i=t.charAt(h),!("0">i||i>"9");)h+=1,c+=i;if("."===i)for(h+=1,c+=i;i=t.charAt(h),!("0">i||i>"9");)h+=1,c+=i;if("e"===i||"E"===i){h+=1,c+=i,i=t.charAt(h),("-"===i||"+"===i)&&(h+=1,c+=i,i=t.charAt(h)),("0">i||i>"9")&&s("Bad exponent",d("number",c));do h+=1,c+=i,i=t.charAt(h);while(i>="0"&&"9">=i)}i>="a"&&"z">=i&&(c+=i,h+=1,s("Bad number",d("number",c))),a=+c,isFinite(a)?f.push(d("number",a)):s("Bad number",d("number",c))}else if("'"===i||'"'===i){for(c="",o=i,h+=1;i=t.charAt(h)," ">i&&(d("string",c),s("\n"===i||"\r"===i||""===i?"Unterminated string.":"Control character in string.",d("",c))),i!==o;){if("\\"===i)switch(h+=1,h>=l&&s("Unterminated string",d("string",c)),i=t.charAt(h)){case"b":i="\b";break;case"f":i="\f";break;case"n":i="\n";break;case"r":i="\r";break;case"t":i="	";break;case"u":h>=l&&s("Unterminated string",d("string",c)),i=parseInt(t.substr(h+1,4),16),(!isFinite(i)||0>i)&&s("Unterminated string",d("string",c)),i=String.fromCharCode(i),h+=4}c+=i,h+=1}h+=1,f.push(d("string",c)),i=t.charAt(h)}else if("/"===i){for(h+=1,c="",u="";;){if(i=t.charAt(h),"/"===i){for(;i=t.charAt(h+1),i>="a"&&"z">=i||i>="A"&&"Z">=i||"$"===i||"_"===i;)u+=i,h+=1;break}"\\"===i&&(h+=1,h>=l&&s("Unterminated regexp",d("string",c)),i=t.charAt(h),i="\\"+i),c+=i,h+=1}h+=1,f.push(d("regexp",new RegExp(c,u))),i=t.charAt(h)}else if(e.indexOf(i)>=0){for(c=i,h+=1;;){if(i=t.charAt(h),h>=l||n.indexOf(i)<0)break;c+=i,h+=1}f.push(d("operator",c))}else h+=1,f.push(d("operator",i)),i=t.charAt(h);return f}},o=function(t){t=t||{};var e,n,o,c,u={},h=function(){return this},l=function(t){return t.nud=h,t.led=null,t.std=null,t.lbp=0,t},f=function(t){var i,a,c,h;return t&&e.id!==t&&s("Expected '"+t+"'.",e),o>=n.length?void(e=u["(end)"]):(c=n[o],o+=1,h=c.value,i=c.type,("operator"===i||"string"!==i)&&h in u?(a=u[h],a||s("Unknown operator.",c)):"name"===i?a=l(c):"string"===i||"number"===i||"regexp"===i?(a=u["(literal)"],i="literal"):s("Unexpected token.",c),e=r(a),e.from=c.from,e.to=c.to,e.value=h,e.arity=i,e)},d=function(t){var n,i=e;for(f(),n=i.nud();t<e.lbp;)i=e,f(),n=i.led(n);return n},p={nud:function(){s("Undefined.",this)},led:function(t){s("Missing operator.",this)}},v=function(t,e){var n=u[t];return e=e||0,n?e>=n.lbp&&(n.lbp=e):(n=r(p),n.id=n.value=t,n.lbp=e,u[t]=n),n},m=function(t,e,n){var i=v(t);return i.nud=function(){return this.value=u[this.id].value,this.arity="literal",this},i.value=e,i},y=function(t,e,n){var i=v(t,e);return i.led=n||function(t){return this.first=t,this.second=d(e),this.arity="binary",this},i},g=function(t,e,n){var i=v(t,e);return i.led=n||function(t){return this.first=t,this.second=d(e-1),this.arity="binary",this},i},b=function(t,e){var n=v(t);return n.nud=e||function(){return this.first=d(70),this.arity="unary",this},n};v("(end)"),v("(name)"),v(":"),v(")"),v("]"),v("}"),v(","),m("true",!0),m("false",!1),m("null",null),m("undefined"),m("Math",Math),m("Date",Date);for(var j in t)m(j,t[j]);return v("(literal)").nud=h,y("?",20,function(t){return this.first=t,this.second=d(0),f(":"),this.third=d(0),this.arity="ternary",this}),g("&&",31),g("||",30),g("===",40),g("!==",40),g("==",40),g("!=",40),g("<",40),g("<=",40),g(">",40),g(">=",40),y("in",45,function(t){return this.first=t,this.second=d(0),this.arity="binary","repeat"===c&&(t.arity="assignment",this.assignment=!0),this}),y("+",50),y("-",50),y("*",60),y("/",60),y("%",60),y("(",70,function(t){var n=[];if("."===t.id||"["===t.id?(this.arity="ternary",this.first=t.first,this.second=t.second,this.third=n):(this.arity="binary",this.first=t,this.second=n,"unary"===t.arity&&"function"===t.id||"name"===t.arity||"literal"===t.arity||"("===t.id||"&&"===t.id||"||"===t.id||"?"===t.id||s("Expected a variable name.",t)),")"!==e.id)for(;;){if(n.push(d(0)),","!==e.id)break;f(",")}return f(")"),this}),y(".",80,function(t){return this.first=t,"name"!==e.arity&&s("Expected a property name.",e),e.arity="literal",this.second=e,this.arity="binary",f(),this}),y("[",80,function(t){return this.first=t,this.second=d(0),this.arity="binary",f("]"),this}),y("|",10,function(t){var n;if(this.first=t,e.arity="filter",this.second=d(10),this.arity="binary",":"===e.id)for(this.arity="ternary",this.third=n=[];;)if(f(":"),n.push(d(0)),":"!==e.id)break;return this}),b("!"),b("-"),b("typeof"),b("(",function(){var t=d(0);return f(")"),t}),b("[",function(){var t=[];if("]"!==e.id)for(;;){if(t.push(d(0)),","!==e.id)break;f(",")}return f("]"),this.first=t,this.arity="unary",this}),b("{",function(){var t,n,i=[];if("}"!==e.id)for(;;){if(t=e,"name"!==t.arity&&"literal"!==t.arity&&s("Bad property name: ",e),f(),f(":"),n=d(0),n.key=t.value,i.push(n),","!==e.id)break;f(",")}return f("}"),this.first=i,this.arity="unary",this}),b("new",function(t){var n=[];if(this.first=d(79),"("===e.id){for(f("("),this.arity="binary",this.second=n;;){if(n.push(d(0)),","!==e.id)break;f(",")}f(")")}else this.arity="unary";return this}),function(t,e){i=t,n=a(t,"=<>!+-*&|/%^","=<>&|"),o=0,c=e,f();var r=d(0);return f("(end)"),r}};n.parse=o()},{}],16:[function(t,e,n){function i(t){return s.lastIndex=0,t&&s.test(t)}function r(t){var e,n,i=[],r=[],a=0;for(s.lastIndex=0;e=s.exec(t);)s.lastIndex-a>e[0].length&&r.push(t.slice(a,s.lastIndex-e[0].length)),n={escape:!e[2],path:(e[2]||e[1]).trim(),position:r.length,textMap:r},i.push(n),r.push(e[0]),a=s.lastIndex;return t.length>a&&r.push(t.slice(a,t.length)),i.textMap=r,i}var s=/{{({([^}\n]+)}|[^}\n]+)}}/g;n.hasToken=i,n.parseToken=r},{}],17:[function(t,e,n){"use strict";function i(t){return t.replace(o,"").split(a)}function r(){var t,e,n,i,s,a,o,c=arguments[0]||{},h=1,l=arguments.length,f=!1;for("boolean"==typeof c&&(f=c,c=arguments[h]||{},h++),u.isFunction(arguments[l-1])&&(o=arguments[l-1],l--),"object"==typeof c||u.isFunction(c)||(c={});l>h;h++)if(null!=(t=arguments[h]))for(e in t)if(t.hasOwnProperty(e)&&"prototype"!==e)if(n=c[e],i=t[e],f&&i&&(u.isPlainObject(i)||(s=u.isArray(i)))){if(c===i)continue;s?(s=!1,a=n&&u.isArray(n)?n:[]):a=n&&u.isPlainObject(n)?n:{},o&&(i=o(a,i,e)),c[e]=r(f,a,i,o)}else u.isUndefined(i)||(o&&(i=o(n,i,e)),c[e]=i);return c}var s=t("./env.js").document,a=/(?:\.|\[)/g,o=/\]/g,c=Object.create||function(t){function e(){}return e.prototype=t,new e},u={noop:function(){},ie:!!s.attachEvent,isObject:function(t){return"object"==typeof t&&null!==t},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:function(t){return u.ie?t&&t.constructor+""==Array+"":Array.isArray(t)},isPlainObject:function(t){return!t||"[object Object]"!=={}.toString.call(t)||t.nodeType||t===t.window?!1:!0},beforeFn:function(t,e,n){return function(){var i=e.apply(this,arguments);return n&&n.call(this,i)?i:t.apply(this,arguments)}},afterFn:function(t,e,n){return function(){var i=t.apply(this,arguments);return n&&n.call(this,i)?i:(e.apply(this,arguments),i)}},parseKeyPath:i,deepSet:function(t,e,n){if(t){var s=i(t),a=n;s.forEach(function(t,n){n===s.length-1?a[t]=e:a&&a.hasOwnProperty(t)?a=a[t]:(a[t]={},a=a[t])})}else r(n,e);return n},deepGet:function(t,e){var n,r,s=e;if(t){n=i(t);for(var a=0,o=n.length;o>a;a++){if(r=n[a],!s||!s.hasOwnProperty(r))return;s=s[r]}}return s},clone:function h(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var n in t)e[n]=h(t[n]);return e},extend:r,create:c};e.exports=u},{"./env.js":11}],18:[function(t,e,n){"use strict";function i(t){var e,n={};try{n=a(t,this.dir.type)}catch(i){i.message='SyntaxError in "'+t+'" | '+i.message,console.error(i)}e=o.summary(n),h(this.dir,e),h(this,e),this.vm._assignments=this.assignments,this.ast=n}function r(t,e){var n,s,a,o,u=t;this.dir=e,this.vm=t,this.val=0/0,this.state=r.STATE_READY,i.call(this,e.path);for(var h=0,l=this.paths.length;l>h;h++){for(n=this.paths[h],a=c.parseKeyPath(n)[0];u&&(s=u,!(u._assignments&&u._assignments.indexOf(a)>-1||a in u.$data));)o=!0,u=u._parent;s.$watchers[n]=t.$watchers[n]||[],s.$watchers[n].push(this)}(!this.locals.length||o)&&this.update()}function s(t){try{this.dir.update(t,this.val),this.val=t}catch(e){console.error(e)}}var a=t("./parse.js").parse,o=t("./eval.js"),c=t("./utils.js"),u=t("./class.js"),h=c.extend;h(r,{STATE_READY:0,STATE_CALLED:1},u),h(r.prototype,{update:function(){var t,e=this,n=this.vm;t=this.getValue(n),t&&t.then?t.then(function(t){s.call(e,t)}):s.call(this,t),this.state=r.STATE_CALLED},getValue:function(t){var e,n=this.dir,i=h({},this.vm.$filters,function(t,e){return e.bind(n)});try{e=o.eval(this.ast,{locals:t,filters:i})}catch(r){e="",console.error(r)}return(c.isUndefined(e)||null===e)&&(e=""),e}}),e.exports=r},{"./class.js":2,"./eval.js":12,"./parse.js":15,"./utils.js":17}]},{},[1])(1)});
//# sourceMappingURL=bee.js.map